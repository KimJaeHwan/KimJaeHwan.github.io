---
layout: single
title: "컴퓨터 네트워크_02"
---

# IP프로토콜

------

## 01_네트워크 계층의 기능

- ### 네트워크 계층의 주요 기능

  - 라우팅
    - 송수신 호스트 사이의 패킷 전달 경로를 선택하는 과정
    - 최적의 라우팅 경로를  선택하면 전송 속도가 향상되고, 응답 시간이 감소하고, 패킷 손실 확률이 낮아짐
    - 네트워크 구성 형태에 관한 정보를 관리하기 위해 라우팅 테이블을 사용
  - 혼잡제어<sup>Congestion Control</sup>
    - 혼잡을 예방하거나 해소하는 기능
    - 혼잡 : 네트워크에 패킷 수가 과도하게 증가하는 현상
      - <small>혼잡이 발생하면 응답시간이 증가하고, 패킷손실 확률이 높아짐</small>
      - <small>네트워크 특정 영역에서 혼잡이 발생하면 주변으로 빠르게 확산될 가능성이 높음</small>
  - 패킷의 분할과 병합
    - 상위 전송계층에서 전달을 요청한 데이터는 최종적으로 MAC계층의 프레임 구조에서 정의한 형식으로 캡슐화 되어 물리적으로 전송
    - 상위 계층에서 전달한 데이터가 너무크면 여러 개의 패킷으로 작게 쪼개서 전송해야함.
    - 패킷 분할 : 데이터를 여러 패킷으로 나누는 과정
    - 패킷 병합 : 분할된 패킷을 다시 모으는 과정

- ### 연결형 서비스와 비연결형 서비스

  - 네트워크 계층은 전송  계층에 두 가지 서비스를 제공 : 비연결형 서비스, 연결형서비스
  - 비연결형 : 데이터의 전송 경로를 사전에 결정하지 않고 패킷 단위로 전송 경로 결정
    - 패킷의 전달순서
      - <small>패킷이 서로 다른 경로로 전송될 수 있으므로 도착 순서가 일정하지 않음 따라서, 패킷을 수신한 후 상위 계층(=전송계층)에서 패킷 순서를 재조정/재정렬 해야한다.</small>
    - 패킷의 분실 가능성
      - <small>패킷의 100%도착을 보장하지 않음</small>
      - <small>상위 계층에서 패킷 분실 오류를 복구 해야함</small>
  - 연결형 : 데이터 전송 전에 데이터의 전송 경로를 사전에 결정한 후, 패킷을 해당 경로로 전송
    - 비연결형 서비스에 비해 신뢰성이 높음
      - <small>패킷 도착 순서가 (거의)일정. 즉, 보낸 순서대로 수신한다</small>

- ### 라우팅

  - 패킷의 전송경로를 지정하는것
    - 가상회선 방식의 연결형 서비스 : 데이터 전송 전에 연결을 수립하는 단계에서 전송 경로를 결정하고, 이후의 패킷들은 동일한 경로를 따라 전송됨
    - 데이터 그램 방식의 비연결형 서비스 : 고정된 경로가 없고, 전송할 패킷이 생기면 매 패킷마다 독립적인 전달 경로를 설정
  - 전송 경로 결정시 고려사항
    - 공평/평등 원칙 : 다른 패킷의 우선 처리를 위해 다른 패킷이 손해를 보연안됨
    - 효율 원칙 : 전체 네트워크 전송 효율성을 고려해야함(평균 지연시간 , 시간당 전송향 or 처리량 등)
      - <small>지연시간 = 전송지연 + 전파지연 + 처리지연 + 큐잉 지연시간으로 구성</small>
      - <small>처리량: 초당 전송 가능한 비트수 (bps)</small>

| 지연시간  |                            정보                             |
| :-------: | :---------------------------------------------------------: |
| 전송지연  |                      패킷크기/전송속도                      |
| 전파 지연 |                        거리/전파속도                        |
| 처리 지연 | 라우터 또는 목적지 호스트에서 패킷을 처리하는데 소요된 시간 |
| 큐잉 지연 |      라우터에서 한 패킷이 처리되기 전에 대기하는 시간       |

- 네트워크 상황및 구성에 동적으로 대처할 수 있는지 여부에 따라 정적, 동적 라우팅으로 구분

  - 정적라우팅
    - 패킷 전송이 이루어지기전에 직접 경로 정보를 라우터에 미리 저장
    - 장점:
      - 관리자만 제어가 가능하므로 보안이 향상
      - 관리자가 최적의 경로를 알고 있는경우 , 항상 최적의 경로로 패킷 송수신이 가능
      - 라우팅 테이블 갱신이 필요 없으므로, 라우터의 오버 헤드 감소
    - 단점:
      - 경로 정보의 갱신이 어려우므로, 네트워크 변화 또는 네트워크 혼잡에 대처가 어려움
  - 동적라우팅<sup>Dynamic Routing</sup>
    - 라우터에 저장된 경로 정보가 네트워크 상황에 따라 변함
    - 장점 : 현재의 네트워크 상황을 고려해 최적의 경로를 선택할 수 있음
    - 단점 : 경로 정보의 수집과 관리로 인해 라우터 성능 저하 가능
      - <sup>각 라우터는 이웃한 라우터와 네트워크 상태에 대한 정보를 교환하고, 이를 기반으로 최적의 경로를 선택하는 과정을 지속적으로 수행해야함(cpu오버헤드 증가)</sup>
      - <sup>이웃 라우터와 상태 정보 교환을 위해 메시지를 교환하며, 이 과정에서 대역폭을 사용함</sup>

- ### 라우팅

  - 라우터의 초기화 과정에서 가장 먼저 수행하는 작업은 이웃 라우터의 경로 정보를 파악하는 것
  - HELLO/ECHO패킷
    - HELLO :  주변 라우터에 HELLO 패킷을 보내어 주변 경로 정보를 획득
      - <sup>주기적으로 HELLO패킷을 보내어 주변 라우터에 자신의 존재를 알리고, 다른 라우터의 응답을 통해 다른 라우터의 존재 및 연결상태를 확인</sup>
    - ECHO : 라우터 사이의 전송 지연 시간을 측정하는 용도
      - <small>ECHO 패킷을 수신한 호스트는 송신 호스트에 즉각 회신하도록 설계되어 있음</small>
      - <small>이 과정을 반복하고 평균을 구하면 해당 라우터까지의 전송 지연 시간을 유추할 수 있음</small>
  - 라우팅 테이블
    - 패킷 전송 과정에서 라우터가 전송 경로를 쉽게 찾도록 하는 가장 기본적인 도구
    - 패킷의 목적지에 따라, 어떤 네트워크로 전달할지를 결정할 때 사용하는 테이블
    - 라우팅 테이블에 저장해야하는 필수 정보 : 목적지 호스트, 다음 홉
      - <small>목직지 호스트 : 패킷의 최종 목적지가 되는 호스트 주소</small>
      - <small>다음 홉 : 목적지 호스트 까지 패킷을 전달하기 위한 인접 경로</small>
  - 라우팅 관련 정보를 처리하는 방식에 따른 라우팅 기법 분류
    - 소스 라우팅
      - <small>패킷을 전송하는 호스트가 목적지 호스트 까지 전달 경로를 스스로 결정하는 방식</small>
      - <small>송신 호스트의 라우팅 테이블은 패킷을 수신 호스트 까지 전달하기 위해 필요한 모든 경로 정보를 관리하고 있어야함</small>
      - <small>데이터그램 방식과 가상 회선 방식에서 모두 이용가능</small>
      - <small>동작 방식 : </small>
        - <small>송신 호스트는 경로 정보 전체를 결정한 후, 전송 패킷에 기록</small>
        - <small>라우터는 패킷에 기록된 경로에 따라 패킷을 중개함(라우터는 라우팅 테이블을 관리할 필요가 없음)</small>
    - 중압 (집중형) 라우팅<sup>Centralized Routing</sup>
      - <small>RCC라는 특별한 호스트를 사용해 전송 경로에 관한 모든 정보를 중앙에서 관리하는 방식</small>
      - <small>페킷 전송시, 송신 호스트는 RCC로부터 목적지 호스트까지 도작하기 위한 경로 정보를 먼저 얻고, 해당 경로를 따라 패킷을 전송함</small>
      - <small>장점 : 경로 정보를 특정 호스트가 관리하기 떄문에 다른 일반 호스트 및 라우터의 경로 정보 관리 부담 감소</small>
      - <small>단점 : RCC에 과중한 트래픽 처리부담을 주게 되어 네트워크 전체 효율이 떨어질 수 있음</small>
      - <small>네트워크 전체의 상태정보를 가지는 알고리즘을 링크 상태 라우ㅠ팅 알고리즘 이라고한다.</small>
    - 분산 라우팅<sup>Distributed Routing</sup>
      - <small>라우팅 정보가 분산되는 방식, 패킷의 전송 경로에 위치한 각 라우터가 경로 선택에 참여한다</small>
      - <small>라우터들은 반복적이고 분산된 방법으로 네트워크 구간별 최소 비용 경로 계산을 계산한다 (인접 노드에 대한 링크 정보를 가지고 시작하며, 인접 노드와의 정보 교환을 통해 점차 목적지까지의 최소 비용 경로를 계산)</small>
      - <small>네트워크에 존재하는 호스트의 수가 많아질수록 다른 방식보다 효과적일 수 있다.</small>
    - 계층라우팅<sup>Hierarchical Routing</sup>
      - <small>분산 라우팅 기능과 중앙 라우팅 기능을 적절히 조합하는 방 식</small>
      - <small>네트워크 규모가 계속 커지는 환경에 효과적</small>

## 혼잡 제어

- 혼잡<sup>Congestion</sup> : 네트워크 트래픽이 과도하게 증가하여 네트워크 성능 감소 현상이 급격하게 악화 되는 현상
- 혼잡제어<sup>Congestion Control</sup> : 혼잡 문제를 해결하기 위한 방안
- 흐름제어 VS 혼잡제어
  - 흐름제어 : 송신,수신 호스트 사이의 1:1전송 속도 문제를 해결
  - 혼잡제어 : 더 넓은 관점에서 , 호스트와 라우터를 포함한 네트워크 전송 성능 문제를 해결
- 혼잡의 원인
  - 네트워크 관점: 네트워크 처리 능력보다 지나치게 많은 패킷이 네트워크에 유입
  - 개별 라우터 관점 : 출력 처리량 보다 입력되는 패킷량이 많은 경우, 버퍼 용량 부족이 심화되어 패킷이 처리되지 못하고 버려짐 => 송신 호스트는 timeout 이후에 패킷을 재전송 => 네트워크로 유입되는 패킷량 증가
- 혼잡의 원인 및 해결방법
  - 타임 아웃 시간이 너무 작게 설정되어 있으면 혼잡도가 급격히 증가 => 네트워크 혼잡 징후가 보이면timeout시간을 늘리는 방법으로 혼잡을 해결할 수 있음
  - 패킷 도착 순서가 다를 때 해당 패킷을 분실 처리하면 패킷 재전송이 발생해 네트워크 혼잡도 상승 => 도착 순서가 틀리게 도착한 패킷을 버퍼에 보관한 후 , 순서에 맞게 재정렬해서 사용하는 방안 필요
  - 모든 패킷에 대해 ACK를 회신하면 네트워크 트래픽 증가 => 여러개의 패킷을 하나의 ACK로 처리하는 방안 필요
  - 부적절하게 피기배킹을 사용하면 응답 시가닝 느려져 타임 아웃 발생 -> 재전송 유발
    - <small>피기 배킹: 수신자가 송신자에게 ACK를 보내지 않고 수신자가 송신자에게 패킷을 전송시 ACK응답정보를 포함하여 보내는 방식</small>
  - 패킷 생존 시간을 작게하면 높은 확률로 패킷이 강제로 제거되어 타임아웃 증가
- 라우팅 알고리즘을 이용한 혼잡 해결 방법
  - 혼잡이 발생하지 않는 경로를 배정하도록 설계 (혼잡이 발생하는 경로를 서택하면 혼잡이 주변으로 확대됨)
- 트래핑 성형
  - 트래픽이 특정 시간에 집중되는 버스트 현상으로 혼잡이 발생하는 경우가 많음(=짧은 시간동안 과도한 패킷이 네트워크에 유입 되는 경우)
  - 트래픽 성형 : 송신 호스트가 전송하는 패킷의 발생 빈도를 네트워크가 예측할 수 있는(또는 감당할 수 있는)전송률이 되도록 조정하여 네트워크 혼잡을 완화하는 기능
  - 리키버킷<sup>Leaky Bucket</sup>알고리즘
    - 송신 호스트가 일정하지 않은 속도로 패킷을 전송하더라도, 버퍼에 패킷을 보관하고 일정한 속도로 네트워크로 패킷을 유입시키는 방식
    - 단, 리키 버킷의 버퍼에 오버플로우 발생시, 이후 패킷은 버려짐
    - (링거 같은 느낌인가...... 한방울씩 일정하게 떨어지게 조정)
- 혼잡 제거
  - 네트워크 혼잡은 네트워크 전체에 발생하기 보다 일부 지점에서 발생하는 경우가 많고, 따라서 특정 지역의 혼잡이 다른 지역으로 확대되지 않도록 하는것이 중요
- 혼잡 제거 방식:
  - 특정 지점에 혼잡 발생시, 해당 지점을 지나지 않도록 라우팅 경로를 조절
  - 혼잡제거를 위해 호스트와 서브넷이 가상 회선 연결 과정에서 협상을함
    - <small>송신 호스트가 사용가능한 대역을 미리 정하여, 네트워크에 과도한 트래픽이 발생하는 일을 사전에 예방</small>
    - <small>단점 : 전송대역을 해당 사용자가 이용하지 않더라도 다른 사용자가 이용하지 못함(예 : 10Mbps회선에서 5Mbps를 예약</small>
  - ECN<sup>Explicit Congestion Notification</sup>패킷을 사용한 혼잡 제거
    - 라우터는 트래픽 양을 모니터링 => 출력 선로의 사용 정도가 한계치를 초과하면 주의 표시를함
    - 주의 표시한 방향의 경로는 혼잡이 발생할 가능성이 높기 때문에 특별 관리함

## 02_라우팅 프로토콜

- ### 라우팅 프로토콜의 목적은 최적의 경로를 결정하는 것

  - 최적의 경로? 최단경로(최소의 홉수), 지연 시간이 최소인 경로, 비용이 최소인 경로 등 ...
  - 일반적으로 거리가 최소인 경로를 선택함

- ### 네트워크 거리 기준 : 일반적으로 라우터의 개수 또는 전송 지연 시간을 사용

- ### 간단한 라우팅 프로토콜 

  - 최단 경로 라우팅
    - 패킷이 목적지에 도달할 때까지 거쳐가는 라우터 수가 최소인 경로 선택
    - 장점 : 간단한 방식으로 구현 가능(목적지 까지 도달하는 여러 경로중 가장 짧은 경로 선택)
  - 플러딩<sup>Flooding</sup>
    - 라우터가 자신에게 입력된 패킷을 출력가능한 모든 경로로 중개하는 방식
    - 원본 패킷과 동일한 패킷이 무한히 만들어질 수 있으므로 생존 시간을 제한하여 패킷이 무한정 증가하는 현상 방지
    - 특별한 목적으로만 사용(중요한 데이터를 모든 호스트에 전달하는 경우 등)
  - 거리 벡터<sup>Distace Vector</sup>라우팅 프로토콜
    - 라우터가 자신과 연결된 이웃 라우터와 라우팅 정보를 교환하는 방식
      - 교환하는 정보는 각각의 라우터에서 각 네트워크 까지 패킷을 전송하는데 소요되는 거리 정보
    - 라우터가 저장하고 있어야하는 필수 정보
      - 링크벡터 : 이웃 네트워크에 대한 연결 정보
        - 링크벡터L(x) : 라우터 x와 직접 연결된 이웃 네트워크에 대한 연결 정보를 보관
      - 거리벡터 : 개별 네트워크까지의 거리정보 (일반적으로 전송 지연시간을 거리값으로 사용)
        - 전체 네트워크에 소속된 모든 개별 네트워크들까지의 거리 정보 (일반적으로 전송 지연시간을 거리 값으로 사용)
      - 다음 홉 벡터 : 개별 네트워크로 가기 위한 다음 홉 정보
        - 개별 네트워크까지 패킷을 전송하는 경로에 있는 다음 홉 정보(라우터)를 관리

- ### 거리 벡터 라우팅 프로토콜

  - RIP<sup>Routing Information Protocol</sup>프로토콜
    - 거리 벡터 방식의 내부 라우팅 프로토콜 중에서 가장 간단하게 구현된것
    - 소규모 네트워크 환경에 적함, 현재 가장 많이 사용하는 라우팅 프로토콜
    - 라우팅 테이블 업데이트 규칙
    - 라우터간 벡터 정보를 교환 하기위해 다음과 같은 패킷 구조를 사용한다.
      - <small>Command(명령) : 값이 1 이면 RIP요청을, 2 이면 RIP응답(라우터간 요청-응답 과정을 통해 벡터 정보교환)</small>
      - <small>Version(버전):RIP프로토콜의 버전 번호</small>
      - <small>Address Family Identifier(주소 패밀리 구분자): IP프로토콜의 주소는 2로 설정</small>
      - <small>IP Address(IP주소) : 특정한 네트워크를 지칭하는 용도로 사용되기 때문에 IP주소의 네트워크 부분의 값만 사용하고 호스트부분은 0으로 채움</small>
      - <small>Metric(거리) : 해당 라우터에서 목적지 네트워크까지의 거리</small>

- ### 링크 상태<sup>Link State</sup>라우팅 프로토콜

  - 개별 라우터가 이웃 라우터까지의 거리 정보를 구한 후, 이를 네트워크에 연결된 모든 라우터에 통보
    - <small>거리 벡터 방식과 반대(각 라우터는 벡터정보를 수집하여 거리 정보 계산)</small>
  - 거리벡터 라우팅 프로토콜의 단점을 보완하기 위한 방식
    - <small>거리 벡터 라우팅 프로토콜에서는, 각라우터가 주기적으로 상당한 양의 '정보요청'을 수신 받게 되고, 링크 상태가 빈번히 변하는 환경에서는 최적 경로를 계산하는데 많은 시간이 소요됨</small>
    - <small>링크 상태 라우팅 프로토콜은 이웃 라우터와의 연결 정보에 변화가 있을 때만 정보를 전달</small>
  - 플러딩<sup>Flooding</sup>기법 사용 : 임의의 라우터가 이웃한 모든 라우터에 정보를 전달하고, 다시 이들 라우터가 주변의 모든 라우터에 정보를 전달하는 방식으로 동작
    - <small>플러딩한 패킷이 무한정 순환하는것을 방지하기 위해, 각 라우터는 전달 받은 패킷을 저장해두고 동일한 패킷이 다시 수신되면 버림</small>
    - 예) OSPF<sup>Open Shortest Path First</sup>
    - 다익스트라(Dijkstra)알고리즘을 사용해서 최단 경로 계산
    - TCP/IP 기반의 인터넷에서 사용

## 외부 라우팅 프로토콜 

- 내부 라우팅 프로토콜 

  - 거리벡터 방식을 사용하는 RIP
  - 링크 상태 방식을 사용하는 OSPF

- 외부 라우팅 프로토콜

  - 경로 벡터 프로토콜 : 단순히 연결 가능한지에 대한 정보만 제공( 경로 거리에 대한 정보가 필요 없음)
  - 원거리의 경로 정보를 제공한느 외부 라우팅 프로토콜은  경로 존재 유무에 초점을 맟춘다.

- ### BGP

  - 대표적 외부 라우팅 프로토콜
  - 서로다른 종류의 자율 시스템에서 동작하는 라우터가 라우팅 정보를 교환할 수 있는 기능 지원
  - TCP 프로토콜을 사용해서 메시지 교환.

## 03_IP프로토콜

- ### IP프로토콜

  - 인터넷에서 네트워크 계층의 데이터 전송 프로토콜로 사용
  - 호스트 주소 표기, 패킷 분할 등의 기능 제공(단대단<sup>end-to-end</sup>오류재오, 흐름제어 기능없음)

- ### IP프로토콜의 주요 특징

  - 비연결형 서비스를 제공
  - 패킷을 분할/병합하는 기능을 수행
  - 데이터 체크섬은 제공하지 않고, 헤더 체크섬만 제공
  - Best Effort원칙에 따른 전송기능 제공(전송 패킷이 수신 호스트에 100% 도착하는 것을 보장하지 않으므로 상위 계층에서는 전송 오류 문제를 고려해야함)

- ### IP 헤더 구조

  - DS<sup>Differentiated Service</sup>(서비스 품질)/ECN<sup>Explicit Confgestion Notification</sup>(혼잡제어)필드

    - DS/ECN필드가 도입되기전에는 8 비트의 Service Type필드로 정의 되었다.

  - DS<sup>Differentiated Service</sup>

    - 사전에 서비스 제공자와 서비스 이용자 사이에 서비스 등급에 대해 합의가 이루어지며, 동일한 DS값을 갖는 트래픽들은 동일한 서비스 등급으로 처리됨(라우터에 의해 처리)

  - ECN<sup>Explicit Confgestion Notification</sup>

    - ECT0과 ECT1은 동일한 의미(어느것을 사용해도 무방하다)

    - 송신 호스트가 라우터에게 IP패킷에 캡슐화 된 TCP프로토콜이 ECN기능을 지원한다는 것을 알려주는 용도

    - ECN기능을 위하여 TCP프로토콜의 헤더에 ECE필드와 CWR필드가 추가됨

      ECN필드 값의 의미

|             필드값             |                       의미                        |
| :----------------------------: | :-----------------------------------------------: |
|               00               |   IP패킷이 ECN기능을 사용하지 않음을 의미한다.    |
|           01(ECT 1)            |   TCP프로토콜도 ECN 기능을 지원한다는 의미이다.   |
|           10(ECT 0)            |   TCP프로토콜도 ECN기능을 지원한다는 의미이다.    |
| 11(CE: Congestion Experienced) | 라우터가 송신 호스트에 혼잡을 통지할 때 사용한다. |

- IP 헤더 구조

  - ### 패킷 분할

    - 상위 계층에서 내려온 전송 데이터가 하나의 패킷으로 전송하기에 너무 크면 분할해 전송한다.
    - 패킷 분할과 관련된 필드:
    - Identification(식별자 혹은 구분자)
      - <small>IP헤더의 두 번째 워드에는 패킷 분할과 관련된 정보가 포함</small>
      - <small>Identification필드는 송신 호스트가 지정하는 패킷 구분자 기능을 수행</small>
      - <small>IP프로토콜이 분할한 패킷들에 동일한 고유번호를 부여하여 수신 호스트가 병합할 수 있도록 도움(패킷을 분할하지 않을 경우, 패킷을 전송할 때 마다 이 필드 값을 1 씩증가)</small>
    - DF<sup>Don't Fragment</sup>: 값을 1로 설정시 패킷이 분할 되지 않도록 한다.
    - MF<sup>More Fragment</sup> : 
      - <small>MF필드 값을 1로 지정하여, 분할 패킷이 뒤에 지속됨을 표시</small>
      - <small>마지막 패킷은 MF비트를 0으로 지정하여 분할 패킷이 더없음을 포시</small>
    - Fragment Offset(분할 옵셋)
      - <small>패킷 분할시, 12비트의 Frag offs필드를 사용한다.</small>
      - <small>저장 되는 값은 분할 된 패킷의 내용이 원래의 분할 전 데이터에서 위치하는 상대 주소값</small>
      - <small>값은 8바이트의 배수</small>

  - ### 주소 관련 필드

    - Source Address : 송신 호스트의 IP주소
    - Destination Address : 수신 호스트의 IP주소
    - IP주소 체계는 크게 5종류:
      - <small>클래스 A,B,C는 유니캐스팅에, D는 멀티 캐스팅에 사용</small>
      - <small>클래스 E는 향후 사용 목적으로 예약된 클래스</small>
    - 클래스 A, B, C는 주소를network주소와 host주소 필드로 구분해 관리
      - <small>클래스 별로 네트워크 크기에 따라 주소 관리를 다르게함</small>
      - <small>network(네트워크) : 네트워크 주소</small>
      - <small>host(호스트) : 네트워크 주소가 결정되면 하위의 호스트 주소를 의미하는 host 비트 값을 개별 네트워크의 관리자가 할당</small>

  - ### 기타 필드

    - Header Checksum(헤더 체크섬):
      - <small>전송 과정에서 발생할 수 있는 헤더 오류를 검출하는 기능(데이터의 오류는 검사하지 않음)</small>
    - Options(옵션) : 네트워크 관리나 보안과 같이 특수 용도로이용
    - Padding(패딩) : IP헤더의 크기는 워드(=32비트) 크기의 배수가 되도록 설계되었음. 헤더의 크기가 이 조건에 맞지 않으면(=워드의 배수가 아니면) Paddinf필드를 사용해서 크기를 조정(=워드의 배수가 되도록 의미 없는 값으로 채워 넣음)

### 패킷 분할

- 분할의 필요성
  - 각 계층별로 한번에 전송할 수 있는 데이터 크기가 정해져 있음. 상위 계층에서 너무 큰 데이터 전송을 요청하면 하위 계층은 한번에 전송할 수 있는 정도의 크기로 분할 한 후 전송해야한다.
  - 또한, 패킷이 목적지까지 전송되는 과정에서 출발지와는 다른 통신 프로토콜을 사용하는 네트워크를 지나게 되는경우, 해당 프로토콜이 정의하는 최대 패킷크기에 맞게 분할 해야한다.
  - 패킷을 분할하고 병합하는 작업은 IP프로토콜이 담당
  - 라우터(Router)도 패킷 분할 기능 수행:
  - 라우터의 좌우에 연결된 LAN이 서로 다른경우, 데이터 링크 계층의 프레임 크기가 서로 다를 수 있음
  - 따라서, 라우터는 데이터를 수신한 후 다음으로 중개하는 방향에 위치한 LAN에 맞도록 프레임을 분할 해야한다.



### DHCP프로토콜 : 동적 IP자동 할당/관리 프로토콜

- IP주소를 여러  컴퓨터가 공유해서 사용하여 IP자원의 사용 효율성을 높임
- 네트워크를 사용하는 PC에만 IP주솔르 자동으로 할당
- 네트워크를 사용하지않는 PC의 IP주소를 회수하여 POOL로 관리

- ### DHCP메시지

  - DHCP프로토콜의 주요 메시지

    - <small>DHCP_DISCOVER : 클라이언트가 DHCP서버를 찾기 위해 전송하는 브로드 캐스트 메시지</small>

    - <small>DHCP_OFFER : 클라이언트의 DHCP_DISCOVER 메시지에 대한 응답으로 DHCP서버가 응답하는 메시지</small>

      - <small>Your ID Addr 필드에는 권고하는  IP주소를 입력</small>
      - <small>server ID Addr 필드에는 서버의 IP 주소를 입력</small>

    - DHCP_REQUEST : 주소를 권고한 DHCP서버에 DHCP_REQUEST메시지를 전송하여 권고한 주소를 사용한다고 알림

    - DHCP_ACK :권고한 IP주소가 최종적으로 사용 가능한지 판단후, 사용 가능하면 DHCP_ACK 메시지를 전송

    - DHCP_NACK : 클라이언트가 DHCP_DISCOVER과정을 다시 수행 하도록 명령

      - <small>DHCP 서버는 동일한 IP주소를 여러 클라이언트에게 권고할 수 있음</small>

      - <small>서버가 동일한 IP 주소를 호스트 A와 B에게 권고 했고, 호스트 A에게 사용 허가를 해준 후에 호스트 B가 동일한 IP 로 DHCP_REQUEST응답을 보내오면, 주소 충돌이 발생하므로 호스트 B에게 DHCP_NACK를 전달</small>

        